<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>数组转化成树</title>
</head>
<body>
  数组转化成树
  <script type="text/javascript">
    var obj = [
      { id: 3, parent: 2 },
      { id: 1, parent: null },
      { id: 2, parent: 1 }
    ];
    function convert(array) {
      const arr = [ ...array ];
      var result = {};
      var p = result;
      var parent = null;
      while(arr.length) {
        var curIndex = arr.findIndex(i => i.parent === parent);
        var curEle = arr[curIndex];
        arr.splice(curIndex, 1);

        p.id = curEle.id;
        p.parent = curEle.parent;
        p = p.child = {};

        parent = curEle.id;
      }
      p = undefined;
      return result;
    }
    console.log(convert(obj));
  </script>
</body>
</html>
